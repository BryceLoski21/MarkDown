# 第六章_集合

[TOC]

## 集合概述

```mermaid
graph TD
A[集合]
M[Map]
C[Collection]
HM[HashMap]
TM[TreeMap]
L[List]
S[Set]
AL[ArrayList]
LL[LinkedList]
V[Vector]
HS[HashSet]
TS[TreeSet]

A-->M
A-->C
M-->HM
M-->TM
C-->L
C-->S
L-->AL
L-->LL
L-->V
S-->HS
S-->TS
```

Java中的集合就像一个容器,专门存储Java对象(实际上是对象的引用),这些对象可以是任意类型,且长度可变,这些集合类位于java.util包中.

集合按照存储类型可以分为两大类:单列集合Collection和双列集合Map.

1. Collection
   - 单列集合的根接口,用于存储一系列符合某种规则的元素.重要的子接口有List和Set.
   - List集合的特点是元素有序,可重复.List的主要实现类有ArrayList和LinkedList以及Vector.
   - Set集合的特点是元素无序且不可重复.Set的主要实现类有HashSet和TreeSet.
2. Map
   - 双列集合的根接口,用于存储具有键(Key),值(Value)映射关系的元素.
   - Map集合中每个元素都包含一对键值,并且Key是唯一的,在使用Map集合时可以通过指定的Key找到对应的Value.Map接口的主要实现类有HashMap和TreeMap.

## Collection接口

单列集合Collection中的一些主要方法,其中stream()方法是JDK8增加的.

|方法声明|功能概述|
|:--:|:--:|
|boolean add(Object o)|向集合中添加一个元素|
|boolean addAll(Collection c)|将指定集合c中的所有元素添加到该集合中|
|void clear()|删除该集合中的所有元素|
|boolean remove(Object o)|删除该集合中的指定元素|
|boolran removeAll(Collection c)|删除集合中包含指定集合c中的所有元素|
|boolean isEmpty()|判断该集合是否为空|
|boolean contains(Object o)|判断该集合中是否包含某个元素|
|boolean containsAll(Collection c)|判断该集合中是否包含指定集合c中的所有元素|
|Iterator iterator()|返回在该集合的元素上进行迭代的迭代器(Iterator),用于遍历该集合所有元素|
|int size()|获取该集合元素个数|
|Stream\<E> stream()|将集合源转换为有序元素的流对象|

### List <i><font size=4>IS-A</font></i> Collection <font size=2 color=red>注: IS-A 即 subsumption父子继承关系</font>

List集合特点: 允许出现重复的元素,所有元素以线性方式进行存储.元素有序,元素存入顺序和取出顺序一致.

List作为Collection集合的子接口,不但继承了Collection接口中的全部方法,而且还增加了一些操作集合的特有方法,其中sort(Comparator<? super E> c)方法是JDK8增加的.

|方法声明|功能描述|
|:--:|:--:|
|void add(int index, Object element)|将元素element插入在List集合的指定索引位置|
|boolean addAll(int index, Collection c)|将集合c包含的所有元素插入到List集合的指定索引位置|
|Object get(int index)|返回集合index索引处的元素|
|Object set(int index, Object element)|将集合index索引处的元素替换成element元素,并将替换的元素返回|
|Object remove(int index)|删除index索引处的元素|
|int indexOf(Object o)|返回对象o在集合中首次出现的位置索引|
|int lastIndexOf(Object o)|返回对象o在集合中最后一次出现的位置索引|
|List subList(int fromIndex, int toIndex)|返回从索引fromIndex(包括)到索引toIndex(不包括)之间的所有元素集合组成的子集合|
|Object[] toArray()|将集合元素转换成数组|
|default void sort(Comparator<? super E> c)|根据指定的比较器规则对集合元素进行排序|

#### ArrayList <font size=4 color=red><i>implement</i></font> List

ArrayList内部封装了一个长度可变的数组对象,当存入的元素超过数组长度时,ArrayList会在内存中分配一个更大的数组来存储这些元素,因此可以将ArrayList看作是一个长度可变的数组.
ArrayList在增加或删除指定位置的元素时,会创建新的数组,效率比较低,不适合做大量的增删操作,但是其采用数组结构通过索引方式访问元素的方式在遍历和查找元素时极为高效.

```java
import java.util.ArrayList;


public class Example01 {

   public static void main(String[] args) {
      // 创建ArrayList对象,并显示地指定集合中存储String类型的元素,避免产生安全隐患
      ArrayList<String> list = new ArrayList();

      // 向集合中添加元素
      list.add("stu1");
      list.add("stu2");
      list.add("stu3");
      list.add("stu4");

      System.out.println("集合的长度: " + list.size());
      System.out.println("第2个元素是: " + list.get(1)); //索引取值从0开始
   }
}
```

#### LinkedList <font size=4 color=red><i>implement</i></font> List

LinkedList内部包含有两个Node类型的first和last属性维护一个双向循环链表,链表中的每一个元素都使用引用的方式来记住它的前一个元素和后一个元素,从而将所有元素彼此连接起来.
LinkedList在指定位置插入一个新元素时,只需要修改元素之间的这种引用关系,删除一个节点也是如此,所以LinkedList集合对于元素的增删操作表现出很高的效率,但是在遍历和查找元素时效率较低.

```mermaid
graph LR
One[元素1] --> New[新增元素]
One -.-> Two[元素2]
Two -.-> One
Two --> New
New --> One
New --> Two
```

LinkedList集合除了从接口Collection和List中继承并实现了集合操作方法外,还专门针对元素的增删操作定义了一些特有的方法.

|方法声明|功能概述|
|:--:|:--:|
|void add(int index, E element)|在此链表中指定位置插入指定的元素|
